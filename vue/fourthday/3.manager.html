<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title></title>
    <link rel="stylesheet" href="node_modules/bootstrap/dist/css/bootstrap.css">
    <link rel="stylesheet" href="node_modules/animate.css/animate.css">
</head>
<body>
<div id="app">
    <div class="navbar navbar-inverse">
        <div class="container-fluid">
            <div class="navbar-header">
                <a class="navbar-brand">管理信息系统</a>
            </div>
            <ul class="nav navbar-nav">
                <li><router-link to="/home">首页</router-link></li>
                <li><router-link to="/profile">个人中心</router-link></li>
                <li><a>退出</a></li>
                <li><router-link to="/login">登录</router-link></li>
            </ul>
        </div>
    </div>
    <div class="container">
        <div class="row">
            <div class="col-md-12">
                <router-view></router-view>
            </div>
        </div>
    </div>

</div>
<script src="node_modules/vue/dist/vue.js"></script>
<script src="node_modules/vue-router/dist/vue-router.js"></script>
<template id="profile">
    <div>个人中心</div>
</template>
<template id="login">
    <div>登录</div>
</template>
<template id="slider">
    <div class="slider" @mouseenter="clear" @mouseleave="autoplay">
        <div class="slider-inner">
            <img :src="datas[index].path" :alt="datas[index].title">
        </div>
        <span class="left" @click="go(prev)">&lt;</span>
        <span class="right" @click="go(next)">&gt;</span>
        <div class="slider-bottom">
            <a v-for="(item,index) of datas" @click="go(index)">{{index+1}}</a>
        </div>
    </div>
</template>
<style>
    .slider{width: 520px;height: 280px; position: relative}
    .slider span{position: absolute;height: 60px;top:110px; display: block;width: 30px;background: #fff;text-align: center;line-height: 60px; cursor: pointer}
    .slider .left{left: 10px}
    .slider .right{right: 10px}
    .slider-bottom{position: absolute;height: 30px;bottom: 0;width: 100%;line-height: 30px;background: rgba(0,0,0,.45); text-align: right}
    .slider-bottom a{color: #fff;font-size: 25px;margin: 0 10px ; display: inline-block; cursor: pointer}
</style>
<template id="home">
    <div>欢迎你~~~
        <slider :datas="images" :delay="3000"></slider>
    </div>
</template>
<script>
    //轮播图组件
    var slider = {
        data(){
          return {index:0,timer:null}
        },
        computed:{
          prev(){
              //prev是根据 index来的 永远是index的上一个，如果已经是0，应该是最后一个
              if(this.index == 0){
                  return this.datas.length - 1;
              }else{
                  return this.index -1;
              }
          },
          next(){ //下一个值 比如说index 0  next 1
              if(this.index == this.datas.length - 1){
                  return 0;
              }else{
                  return this.index + 1;
              }
          }
        },
        mounted(){//页面加载完成后开始自动轮播
           this.autoplay();
        },
        methods:{
          go(index){
              this.index = index;
          },
          clear(){
            clearInterval(this.timer);
          },
          autoplay(){
              this.timer = setInterval(()=>{
                  this.go(this.next);//去下一张
              },this.delay);
          }
        },
        template:'#slider',
        props:{
            datas:{type:Array,required:true},
            delay:{type:Number,default:5000}
        }
    };
    //首页组件
    var home = {
        template:'#home',
        data(){
            return {images:[{path:'./1.jpg',title:'第一张图片'},{path:'./2.jpg',title:'第二张图片'},{path:'./3.jpg',title:'第三张图片'}]}
        },
        components:{ slider }
    };
    //个人中心组件
    var profile = {
        template:'#profile'
    };
    //登录组件
    var login = {
        template:'#login'
    };
    var routes = [
        {path:'/home',component:home},
        {path:'/profile',component:profile},
        {path:'/login',component:login},
    ];
    var router = new VueRouter({routes});
    var vm = new Vue({
        el:'#app',
        router
    });
</script>

<!--首页 /home 个人中心 /profile 登录 /login 退出 （如果没登录不能看到个人中心，本地存储中login为true则表示登录过 ，为false表示没登录过） -->
<!--登录过显示  首页  个人中心 退出-->
<!--没登录过显示  首页  登录-->
</body>
</html>